import{S as D,i as N,s as W,F as j,d as R,t as P,a as q,m as T,c as I,J as B,h as _,C as E,D as G,l as m,L as K,M as O,g as Q,p as U,H as L,o as H,u as b,v as h,w as p,f as S,k as z,n as $,q as V,A as y,I as X,z as F}from"./index-4SrHRAcW.js";function Y(a){let e,s,l,n,t,o,c,u,i,r,v,g,w,C,d=a[4]&&A(a);return o=new S({props:{class:"form-field required",name:"password",$$slots:{default:[x,({uniqueId:f})=>({10:f}),({uniqueId:f})=>f?1024:0]},$$scope:{ctx:a}}}),u=new S({props:{class:"form-field required",name:"passwordConfirm",$$slots:{default:[ee,({uniqueId:f})=>({10:f}),({uniqueId:f})=>f?1024:0]},$$scope:{ctx:a}}}),{c(){e=b("form"),s=b("div"),l=b("h5"),n=y(`Сброс пароля пользователя
                    `),d&&d.c(),t=h(),I(o.$$.fragment),c=h(),I(u.$$.fragment),i=h(),r=b("button"),v=b("span"),v.textContent="Установить новый пароль",p(s,"class","content txt-center m-b-base"),p(v,"class","txt"),p(r,"type","submit"),p(r,"class","btn btn-lg btn-block"),r.disabled=a[2],z(r,"btn-loading",a[2])},m(f,k){m(f,e,k),$(e,s),$(s,l),$(l,n),d&&d.m(l,null),$(e,t),T(o,e,null),$(e,c),T(u,e,null),$(e,i),$(e,r),$(r,v),g=!0,w||(C=H(e,"submit",V(a[5])),w=!0)},p(f,k){f[4]?d?d.p(f,k):(d=A(f),d.c(),d.m(l,null)):d&&(d.d(1),d=null);const J={};k&3073&&(J.$$scope={dirty:k,ctx:f}),o.$set(J);const M={};k&3074&&(M.$$scope={dirty:k,ctx:f}),u.$set(M),(!g||k&4)&&(r.disabled=f[2]),(!g||k&4)&&z(r,"btn-loading",f[2])},i(f){g||(q(o.$$.fragment,f),q(u.$$.fragment,f),g=!0)},o(f){P(o.$$.fragment,f),P(u.$$.fragment,f),g=!1},d(f){f&&_(e),d&&d.d(),R(o),R(u),w=!1,C()}}}function Z(a){let e,s,l,n,t;return{c(){e=b("div"),e.innerHTML='<div class="icon"><i class="ri-checkbox-circle-line"></i></div> <div class="content txt-bold"><p>Пароль пользователя успешно изменён.</p> <p>Теперь можешь войти с новым паролем.</p></div>',s=h(),l=b("button"),l.textContent="Закрыть",p(e,"class","alert alert-success"),p(l,"type","button"),p(l,"class","btn btn-transparent btn-block")},m(o,c){m(o,e,c),m(o,s,c),m(o,l,c),n||(t=H(l,"click",a[7]),n=!0)},p:L,i:L,o:L,d(o){o&&(_(e),_(s),_(l)),n=!1,t()}}}function A(a){let e,s,l;return{c(){e=y("для "),s=b("strong"),l=y(a[4])},m(n,t){m(n,e,t),m(n,s,t),$(s,l)},p(n,t){t&16&&X(l,n[4])},d(n){n&&(_(e),_(s))}}}function x(a){let e,s,l,n,t,o,c,u;return{c(){e=b("label"),s=y("Новый пароль"),n=h(),t=b("input"),p(e,"for",l=a[10]),p(t,"type","password"),p(t,"id",o=a[10]),t.required=!0,t.autofocus=!0},m(i,r){m(i,e,r),$(e,s),m(i,n,r),m(i,t,r),F(t,a[0]),t.focus(),c||(u=H(t,"input",a[8]),c=!0)},p(i,r){r&1024&&l!==(l=i[10])&&p(e,"for",l),r&1024&&o!==(o=i[10])&&p(t,"id",o),r&1&&t.value!==i[0]&&F(t,i[0])},d(i){i&&(_(e),_(n),_(t)),c=!1,u()}}}function ee(a){let e,s,l,n,t,o,c,u;return{c(){e=b("label"),s=y("Подтверждение нового пароля"),n=h(),t=b("input"),p(e,"for",l=a[10]),p(t,"type","password"),p(t,"id",o=a[10]),t.required=!0},m(i,r){m(i,e,r),$(e,s),m(i,n,r),m(i,t,r),F(t,a[1]),c||(u=H(t,"input",a[9]),c=!0)},p(i,r){r&1024&&l!==(l=i[10])&&p(e,"for",l),r&1024&&o!==(o=i[10])&&p(t,"id",o),r&2&&t.value!==i[1]&&F(t,i[1])},d(i){i&&(_(e),_(n),_(t)),c=!1,u()}}}function te(a){let e,s,l,n;const t=[Z,Y],o=[];function c(u,i){return u[3]?0:1}return e=c(a),s=o[e]=t[e](a),{c(){s.c(),l=K()},m(u,i){o[e].m(u,i),m(u,l,i),n=!0},p(u,i){let r=e;e=c(u),e===r?o[e].p(u,i):(E(),P(o[r],1,1,()=>{o[r]=null}),G(),s=o[e],s?s.p(u,i):(s=o[e]=t[e](u),s.c()),q(s,1),s.m(l.parentNode,l))},i(u){n||(q(s),n=!0)},o(u){P(s),n=!1},d(u){u&&_(l),o[e].d(u)}}}function le(a){let e,s;return e=new j({props:{nobranding:!0,$$slots:{default:[te]},$$scope:{ctx:a}}}),{c(){I(e.$$.fragment)},m(l,n){T(e,l,n),s=!0},p(l,[n]){const t={};n&2079&&(t.$$scope={dirty:n,ctx:l}),e.$set(t)},i(l){s||(q(e.$$.fragment,l),s=!0)},o(l){P(e.$$.fragment,l),s=!1},d(l){R(e,l)}}}function se(a,e,s){let l,{params:n}=e,t="",o="",c=!1,u=!1;async function i(){if(c)return;s(2,c=!0);const w=new O("../");try{const C=Q(n==null?void 0:n.token);await w.collection(C.collectionId).confirmPasswordReset(n==null?void 0:n.token,t,o),s(3,u=!0)}catch(C){U.error(C)}s(2,c=!1)}const r=()=>window.close();function v(){t=this.value,s(0,t)}function g(){o=this.value,s(1,o)}return a.$$set=w=>{"params"in w&&s(6,n=w.params)},a.$$.update=()=>{a.$$.dirty&64&&s(4,l=B.getJWTPayload(n==null?void 0:n.token).email||"")},[t,o,c,u,l,i,n,r,v,g]}class oe extends D{constructor(e){super(),N(this,e,se,le,W,{params:6})}}export{oe as default};
